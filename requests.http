### =============================================================================
### üè≠ REAL SERVER - OPTIMIZED TEST SUITE
### Server: http://localhost:3000 (Real Server with PostgreSQL)
### =============================================================================

### =============================================================================
### üè• HEALTH & SYSTEM (Cleaned)
### =============================================================================

### Basic Health Check
GET http://localhost:3000/health

### Detailed Health Check
GET http://localhost:3000/health/detailed

### Readiness Probe
GET http://localhost:3000/health/ready

### Liveness Probe
GET http://localhost:3000/health/live

### Simple Health with Real DB
GET http://localhost:3000/simple-health

### DB Connection Test Only
GET http://localhost:3000/simple-health/db-only

### =============================================================================
### üîê AUTHENTICATION
### =============================================================================

### Register User
POST http://localhost:3000/api/v1/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "username": "testuser",
  "password": "SecurePassword123!",
  "firstname": "Test",
  "lastname": "User"
}

### Login User
POST http://localhost:3000/api/v1/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "SecurePassword123!"
}

### =============================================================================
### üîí PROTECTED ROUTES
### =============================================================================

### Protected Main Route
GET http://localhost:3000/api/v1/protected
Authorization: mock_access_token_12345

### Protected Profile
GET http://localhost:3000/api/v1/protected/profile
Authorization: mock_access_token_12345

### Protected Settings Update
PUT http://localhost:3000/api/v1/protected/settings
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "theme": "dark",
  "notifications": true,
  "language": "fr"
}

### Protected Orders
GET http://localhost:3000/api/v1/protected/orders
Authorization: mock_access_token_12345

### Logout
POST http://localhost:3000/api/v1/protected/logout
Authorization: mock_access_token_12345

### =============================================================================
### üë• USER MANAGEMENT
### =============================================================================

### List All Users
GET http://localhost:3000/api/v1/users
Authorization: mock_access_token_12345

### User Statistics (Admin)
GET http://localhost:3000/api/v1/users/stats
Authorization: mock_access_token_12345

### Find User by Email
GET http://localhost:3000/api/v1/users/by-email?email=test@example.com
Authorization: mock_access_token_12345

### Find User by Username
GET http://localhost:3000/api/v1/users/by-username?username=testuser
Authorization: mock_access_token_12345

### Get User by ID
GET http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000
Authorization: mock_access_token_12345

### Update User Profile
PUT http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/profile
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "firstname": "UpdatedName",
  "lastname": "UpdatedLastName",
  "username": "newusername",
  "bio": "Updated user biography"
}

### ‚≠ê Change Password (MAIN TARGET)
PUT http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/password
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "current_password": "MotDePasse123!",
  "new_password": "NouveauMot123!"
}

### Update User Status (Admin)
PUT http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/status
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "status": "suspended",
  "reason": "Policy violation"
}

### Get User Roles
GET http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/roles
Authorization: mock_access_token_12345

### Assign Role (Admin)
POST http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/roles
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "role": "admin"
}

### =============================================================================
### üß™ ERROR TESTING
### =============================================================================

### Invalid UUID Format
GET http://localhost:3000/api/v1/users/invalid-uuid-format
Authorization: mock_access_token_12345

### Missing Email Parameter
GET http://localhost:3000/api/v1/users/by-email
Authorization: mock_access_token_12345

### Missing Username Parameter
GET http://localhost:3000/api/v1/users/by-username
Authorization: mock_access_token_12345

### Password Too Short (Validation Test)
PUT http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/password
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "current_password": "old",
  "new_password": "123"
}

### Missing Current Password
PUT http://localhost:3000/api/v1/users/550e8400-e29b-41d4-a716-446655440000/password
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "new_password": "NouveauMot123!"
}

### No Authorization Header
GET http://localhost:3000/api/v1/protected

### =============================================================================
### üß™ REAL DATABASE DEBUG
### =============================================================================

### Test Real Database Connection
GET http://localhost:3000/api/v1/debug/db-test
Authorization: mock_access_token_12345

### Check Database Tables
GET http://localhost:3000/api/v1/debug/db-tables
Authorization: mock_access_token_12345

### =============================================================================
### üéØ ALTERNATIVE USER IDs (for flexibility)
### =============================================================================

### Alternative Password Change - Simple ID
PUT http://localhost:3000/api/v1/users/123/password
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "current_password": "MotDePasse123!",
  "new_password": "NouveauMot123!"
}

### Alternative Password Change - Mock User ID
PUT http://localhost:3000/api/v1/users/mock-user-123/password
Authorization: mock_access_token_12345
Content-Type: application/json

{
  "current_password": "MotDePasse123!",
  "new_password": "NouveauMot123!"
}